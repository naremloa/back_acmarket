# 接口

### 🏷 全域部分
❗️未完成部分:
1. 將伺服器處理和資料庫處理操作分離

***

### 🏷 中間件部分
完成部分:
1. session驗證碼有效性檢測，和驗證碼一次性實做
1. 登錄狀態檢測和非有效登錄狀態攔截後續操作實做
1. 權限檢測和無權限狀態下後續操作攔截(接口級權限)

***

### 登入接口
完成部分:

1. 驗證帳號是否存在 (檢所條件排去軟刪除部分)
1. 密碼比對
1. 驗證碼比對
1. 帳號狀態檢測(非正常狀態無法登入，包括未審核，被停用等)
1. 聯表填充帳號權限組部分(主要存儲在session中，方便後續調用權限樹時拿取)
1. 更新登入狀態
1. 更新session

❗️未完成部分:
1. 驗證請求資料的合法性

***

### 登出接口
完成部分:
1. 更新登入狀態

***

### 驗證碼接口
完成部分:
1. 檢測登入狀態(登入狀態下攔截後續操作, 先決判斷)
2. 生成驗證碼，更新session

❗️未完成部分:
1. 判斷請求來源

***

### 註冊接口
完成部分:
1. 驗證碼比對
1. 帳號唯一性檢測(檢測條件包括正常帳號，軟刪除帳號，被停用帳號)
1. 首帳號註冊會給足權限和跳過審核，並順帶創建兩個通用權限，遊客和super。

❗️未完成部分:
1. super帳號無法被軟刪除，保證只在前置作業有首次建帳操作(非安全操作)。

***

### 訂單接口
完成部分:
1. 取出資料庫中的訂單

❗️未完成部分:
1. 按條件搜索
1. 分頁
1. 查詢條件數據合法性

***

### 路由(權限樹)接口
完成部分:
1. 根據session拿到權限組，比對資料庫中的路由樹，生成展開的權限樹(列表)

***

### 帳號審核接口
完成部分:
1. 根據被審核帳號id驗證是否存在該帳帳號
1. 檢驗原帳號狀態和即將更新狀態兩者之間的狀態更新是否符合限定規則
1. 檢驗分配角色是否存在(在要審核通過的情況下，不通過不關心該值)
1. 檢驗資料庫是否正確更新值

***
***

# 頁面未完成

### 首頁

* 分析圖表

***

### 使用者列表

* 新增使用者
* 搜尋

***

### 使用者角色列表

暫無

***

### 路由列表

這頁？？

***

### 訂單資訊

* 已下訂要輸入已付多少錢
* 修改訂單
* 搜尋訂單
* 整理頁面的顯示

***

### 維修列表

* API有變動要重新接

***

### 收支明細

確認需求

***

### 房型設定

* 不同天的標示價格

***

### 佔用列表

* 搜尋
* 修改

***

### 文章列表

待做

***

### 新增文章

這頁？

***
